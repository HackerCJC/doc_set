# 分布式

# 微服务

## 	微服务理论

## 	微服务实践



# 规划





# 算法











# JVM





# Redis





# ElasticSearch







# kafka







# Springboot







# spring







# Mybatis



# Shell



# Docker

# Mysql

> Mysql提炼了其中比较重要几部分内容，分别为『系统架构』『索引』『事物』『锁』『binlog』『redolog』每部分展开都可以有不少内容，事物中比较重要的『隔离级别』等等，索引要Get到精通 。。。

## 		数据建模

​						  <!--三范式(3NF)-->

​						 **1NF：**  原子性，既一个字段是不可再细分的 

​						  **2NF：** 一张表代表一个独立实体，每个实体有自己主键，主键含义与实体唯一性对应

​						  **3NF：** 侧重点在节省空间，避免冗余存储

## 			设计原则

​						 **模块划分**  -->   **实体划分**   -->  **实体关系**  --> **关联关系**  -->  **主键|外键|映射表**  --> **字段定义**    	

## 		索引(B+Tree)

## 		各类LOG

### redolog

**概念：**  redoLog存在于InnoDb引擎层，保障Crash-Safe的，同时与binlog合作完成2PC支持事物性。

### binlog

**概念：** binlog位于服务层，可用于数据备份、恢复，主从复制

结构：二进制存储

模式：statement（记录操作SQL）、row记录写前后

## 		系统架构

<!--架构图-->

<img src="/Users/didi/Library/Application Support/typora-user-images/image-20201121184011161.png?row=true" alt="image-20201121184011161" style="zoom: 50%;" />

<!-- 组件说明 -->

#### 客户端

- 用于连接Mysql服务端

#### 服务端

  ##### 优化器

  - 	**功能：** 处理客户端请求，用户身份认证，操作权限校验。

  - 	**特性：**如果已建立连接，此时使用超管账号更改权限表的情况下已建立好的连接不生效，必须重新连接

  - 	**参数：** conn_timeout 指建立连接前的超时时间，wait_timeout指已建立连接空闲状态的超时时间

  ##### 查询缓存

  -    **功能：**针对每个表使用k-v结构缓存了查询sql和结果集，当经过连接器后先查查询缓存若直接命中则略过后面步骤，提升查询效率

  -    **淘汰：**针对已经缓存了的表当触发update操作时，将清空该表的所有查询缓存，所以查询缓存适合静态表，针对更新频繁的表不适用

  -    **姿势：**可以将query_cache_type设置成DEMAND，这样默认查询语句不使用缓存，需要使用的可以显示指定，like this 

       ```sql
       select SQL_CACHE * from T where ID=10；
       ```

  ##### 分析器

  ##### 优化器

  ##### 执行器



#### 引擎层









## 读写流程

#### 读流程

#### 写流程



## 		事物

​	事物是指一系列操作要么全部成功，要么全部失败，相当于将一个操作序列原子化。事物的出现是为了解决数据库使用过程中出现的『脏读』『不可重复读』『幻读』问题，伴随而来诞生了事物的隔离级别『读未提交』『读已提交』『可重复读』『串行化』 , 提到事物最适合用银行转账举例 ，『性能调优』的提炼是比较关键的点 。。。

#### 问题

- **脏读：**
- **幻读：**
- **不可重复读：**

#### ACID

​	ACID是数据库的的四大特征，分别对应原子性、一致性、持久性、隔离性，各顶个的不好记忆和理解，此时反证法可以尝试

- **原子性：**就是指事物中的一系列操作要么全部成功，要么全部失败，不存在中间状态。
- **一致性：**反证法，不存在数据库中数据与事物的中间状态一致，只与事物执行成功或失败的前后保持一致
- **持久性：**是指数据一旦写入成功，那么几时宕机也可恢复，数据持久存储
- **隔离性：**对应与数据库事物的隔离级别，分『读未提交』『读已提交』『可重复读』『串行化』

#### 隔离级别

​	用下面图片描述事物的隔离级别，以及不同隔离级别之间的区别 ，假设有A、B两个事物，分别并行执行，事物A初始状态变量V1=1，事物A执行的中间过程中穿插事物B修改变量V1=2，并提交事物B，此时接着事物A继续获取变量V2并提交事物，提交事物后获取变量V3，假设变量V1、V2、V3的变化过程就是两个数据库连接操作同一条记录。。。

<img src="/Users/didi/Library/Application Support/typora-user-images/image-20201121200340243.png?row=true" alt="image-20201121200340243" style="zoom:50%;" />

##### 原理解释

​	读未提交是直接读取没有额外操作，串行化是相当于读写锁，读写同一行记录时会加锁交替执行，而针对读已提交和可重复读会生成视图，需要注意的是事物隔离级别越高就意味着效率约低 。。。

- **读未提交：**变量V1的值为2，变量V2、v3的值为2
- **读已提交：**变量V1的值为1，变量V2、V3的值为2
- **可重复读：**变量V1、V2的值为1，变量V3的值为2
- **串行化：**变量V1、V2的值为1，变量V3的值为2

##### 概念解释

- **读未提交：** 就是当前事物还未提交就被其它事物读取到，容易引起脏读
- **读已提交：**是指当前事物需要提交以后，才能被其它事物读取到
- **可重复读：**是指当前事物一旦开启，那整个事物执行过程中不受其它事物干扰，所读取到的变量都是事物开始时的状态，直到事物提交后，变量状态才会得到更新，适用于类似对账的场景，一次对账过程需保障不被干扰
- **串行化：**就是读写锁，是效率最低的一种隔离级别，针对读写冲突情况一个事物开启锁住另一个事物

## 索引

​	索引的价值在于提交查询速度，作用等同书籍的目录。索引存在于引擎层，不同引擎的实现方式各有不同，当下主流的引擎层是Innodb，所以围绕Innodb展开介绍即可，索引按照不同数据结构及使用场景可分为Hash索引、B+Tree索引、有序数组索引等，其中Hash索引适合等值查询，但不适合范围查询，有序数组索引既支持等值查询也支持范围查询查询块但是增删慢，B+Tree索引是最佳选择既支持等值查询也支持范围查询，并且查询和增删效率都比较好是O(log(n)) ，

##### B+Tree

**概念：**B+Tree是一种多叉平衡搜索树，当前节点的左侧子孙节点都比当前节点小，右侧子孙节点都比当前节点大，树的每一层都是从左至右以此递增，Mysql的所有索引都对应一颗B+Tree，根据是否是主键分为主键B+Tree，非主键B+Tree，树的每个节点相当于对应树的索引字段，叶子节点是线性结构，非索引B+Tree叶子节点存储的是主键值，主键索引B+Tree叶子节点存储的是一行记录 。。。。

**使用多叉搜索树的原因，为何不使用二叉搜索树？**

这样做是实际是为了降低树的高度，索引不仅存储于内存还存储于磁盘，由此即可降低磁盘读写的频率，同时由于树的高度降低，访问树节点的次数也由此减少，进一步提高了检索效率 。

##### 回表

如果使用非主键索引做过滤，那么非主键索引B+Tree最终会定位到叶子节点，叶子节点对应的主键值，会根据定位到的主键值再到主键索引B+Tree中进行查询，定位最终record 。

##### 覆盖索引

如果检索的是非主键索引B+Tree 并且Select的刚好是非主键索引字段或者主键ID，那么则直接怼出了结果，跳过了回表的流程，相当于提高了查询效率

##### 索引下推

如果检索的是非主键联合索引，但是Select的是*，意味着不能通过覆盖索引直接怼出结果，Mysql5.6版本以后，做了优化，会针对未匹配到联合索引的值做过滤，然后再回表，减少回表次数进而提升了效率，在5.6以前的版本则没有索引下推的优化，联合索引职能过滤第一个字段，不能进一步根据联合索引的其它字段进行过滤 。

##### 最左前缀原则

Mysql中Innodb的联合索引遵循最左匹配原则，所谓最左匹配就是索引的匹配满足从左边开始的顺序，该原则既可以用于单个字符串字段建索引，也可以用于多字段建联合索引

##### 联合索引

联合索引就是(a,b,c) 这种形式的索引，需要注意的是联合索引遵循最左前缀原则，构建联合索引最需要考虑的就是索引的复用性，就比如(a,b,c) 相当于建立了 a索引 a,b索引，a,b,c索引 。。。

## 锁

## 性能调优

##### 覆盖索引

查询字段的时候指定select主键或者索引字段，性能更高，还有一点是索引下推是Mysql到5.6版本后做的优化，可以降低回表次数。



# issue

 	##    为毛离职

​				**挑战：** 想跳出当前舒适区，寻找一些新的挑战，获得更多进步空间 。

​				**异动： **当前高层异动，未来团队发展方向不明朗，个人发展受限 。				

## 	职业规划



## 各种挑战



## 各种成就





# 开发流程	

​			**需求分析**  -->  **方案设计**  --> **环境构建**  --> **类表设计** --> **开发测试**  --> **生产部署** -->  **DevOps**

